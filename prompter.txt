/root/.pm2/logs/caraon-api-out.log last 15 lines:
18|caraon- | ğŸ”Œ Cliente WebSocket desconectado
18|caraon- | ğŸ”— Novo cliente WebSocket conectado
18|caraon- | ğŸ”Œ Cliente WebSocket desconectado
18|caraon- | ğŸ”— Novo cliente WebSocket conectado
18|caraon- | ğŸ”Œ Cliente WebSocket desconectado
18|caraon- | ğŸ”— Novo cliente WebSocket conectado
18|caraon- | ğŸ”Œ Cliente WebSocket desconectado
18|caraon- | Shutting down all Genkit servers...
18|caraon- | [dotenv@17.2.0] injecting env (6) from .env (tip: âš™ï¸  write to custom object with { processEnv: myObject })
18|caraon- | [dotenv@17.2.0] injecting env (0) from .env (tip: ğŸ” prevent building .env in docker: https://dotenvx.com/prebuild)
18|caraon- | Registering flow: welcomeFlow
18|caraon- | âœ… Servidor WebSocket iniciado
18|caraon- | ğŸš€ API e WebSocket rodando na porta 3030
18|caraon- | ğŸ“š DocumentaÃ§Ã£o da API disponÃ­vel em: http://localhost:3030/api-docs
18|caraon- | âœ… Conectado ao MongoDB para sessÃµes WhatsApp

18|caraon-api  | ğŸ”— Novo cliente WebSocket conectado
18|caraon-api  | â–¶ï¸ Teste de playground recebido para a instÃ¢ncia: 687e78cd6a5d7dda26dfe1b6
18|caraon-api  | âš ï¸ Nenhum Agente Roteador Principal encontrado para a instÃ¢ncia Meu WhatsApp Pessoal no playground. Criando um automaticamente.
18|caraon-api  | Erro ao processar mensagem do WebSocket: PrismaClientValidationError:
18|caraon-api  | Invalid `prisma.agent.create()` invocation in
18|caraon-api  | /root/CaraON-backend/src/services/agent.hierarchy.service.js:19:42
18|caraon-api  |   16   }
18|caraon-api  |   17 }
18|caraon-api  |   18
18|caraon-api  | â†’ 19 const parentAgent = await prisma.agent.create({
18|caraon-api  |        data: {
18|caraon-api  |          name: "Roteador - Meu WhatsApp Pessoal",
18|caraon-api  |          type: "PAI",
18|caraon-api  |          persona: "VocÃª Ã© o agente roteador principal. Sua funÃ§Ã£o Ã© analisar a mensagem do usuÃ¡rio e direcionÃ¡-la para o departamento ou especialista correto (Vendas, Suporte, etc.). Se nÃ£o tiver certeza, peÃ§a ao usuÃ¡rio para esclarecer.",
18|caraon-api  |          instanceId: "687e78cd6a5d7dda26dfe1b6",
18|caraon-api  |          organizationId: null,
18|caraon-api  |          routerAgentId: null,
18|caraon-api  |          ~~~~~~~~~~~~~
18|caraon-api  |          isActive: true,
18|caraon-api  |          priority: 0,
18|caraon-api  |          config: {
18|caraon-api  |            create: {
18|caraon-api  |              maxTokens: 2000,
18|caraon-api  |              temperature: 0.7,
18|caraon-api  |              model: "gemini-pro",
18|caraon-api  |              systemPrompt: "VocÃª Ã© um agente orquestrador que delega tarefas para agentes especializados.",
18|caraon-api  |              fallbackMessage: "Desculpe, nÃ£o consegui processar sua solicitaÃ§Ã£o no momento."
18|caraon-api  |            }
18|caraon-api  |          },
18|caraon-api  |      ?   id?: String,
18|caraon-api  |      ?   parentAgentId?: String | Null,
18|caraon-api  |      ?   templateId?: String | Null,
18|caraon-api  |      ?   createdAt?: DateTime,
18|caraon-api  |      ?   updatedAt?: DateTime,
18|caraon-api  |      ?   childAgents?: AgentUncheckedCreateNestedManyWithoutParentAgentInput,
18|caraon-api  |      ?   tools?: AgentToolUncheckedCreateNestedManyWithoutAgentInput,
18|caraon-api  |      ?   executions?: AgentExecutionUncheckedCreateNestedManyWithoutAgentInput
18|caraon-api  |        },
18|caraon-api  |        include: {
18|caraon-api  |          config: true,
18|caraon-api  |          childAgents: true
18|caraon-api  |        }
18|caraon-api  |      })
18|caraon-api  | Unknown argument `routerAgentId`. Available options are marked with ?.
18|caraon-api  |     at Dn (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:29:1363)
18|caraon-api  |     at ri.handleRequestError (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:121:7102)
18|caraon-api  |     at ri.handleAndLogRequestError (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:121:6784)
18|caraon-api  |     at ri.request (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:121:6491)
18|caraon-api  |     at async l (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:130:9812)
18|caraon-api  |     at async Object.createParentAgent (/root/CaraON-backend/src/services/agent.hierarchy.service.js:19:23)
18|caraon-api  |     at async WebSocket.<anonymous> (/root/CaraON-backend/src/services/websocket.service.js:41:27) {
18|caraon-api  |   clientVersion: '6.12.0'
18|caraon-api  | }







