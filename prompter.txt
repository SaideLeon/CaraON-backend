
/root/.pm2/logs/caraon-api-out.log last 15 lines:
18|caraon- | ðŸ”Œ Cliente WebSocket desconectado
18|caraon- | ðŸ”— Novo cliente WebSocket conectado
18|caraon- | ðŸ”Œ Cliente WebSocket desconectado
18|caraon- | ðŸ”— Novo cliente WebSocket conectado
18|caraon- | ðŸ”Œ Cliente WebSocket desconectado
18|caraon- | ðŸ”— Novo cliente WebSocket conectado
18|caraon- | ðŸ”Œ Cliente WebSocket desconectado
18|caraon- | ðŸ”— Novo cliente WebSocket conectado
18|caraon- | ðŸ”Œ Cliente WebSocket desconectado
18|caraon- | Shutting down all Genkit servers...
18|caraon- | âœ… Conectado ao servidor Redis para histÃ³rico de conversas.
18|caraon- | âœ… Servidor WebSocket iniciado
18|caraon- | âœ… Conectado ao MongoDB para sessÃµes WhatsApp
18|caraon- | ðŸš€ API e WebSocket rodando na porta 3030
18|caraon- | ðŸ“š DocumentaÃ§Ã£o da API disponÃ­vel em: http://localhost:3030/api-docs

18|caraon-api  | ðŸ”— Novo cliente WebSocket conectado
18|caraon-api  | Erro ao criar instÃ¢ncia e roteador padrÃ£o: PrismaClientValidationError:
18|caraon-api  | Invalid `prisma.agent.create()` invocation:
18|caraon-api  | {
18|caraon-api  |   data: {
18|caraon-api  |     name: "Roteador - Equipe de Vendas",
18|caraon-api  |     persona: "VocÃª Ã© o agente roteador principal. Sua funÃ§Ã£o Ã© analisar a mensagem do usuÃ¡rio e direcionÃ¡-la para o departamento ou especialista correto (Vendas, Suporte, etc.). Se nÃ£o tiver certeza, peÃ§a ao usuÃ¡rio para esclarecer.",
18|caraon-api  |     instanceId: "6887efe98e493585ab5d6620",
18|caraon-api  |     organizationId: null,
18|caraon-api  |     routerAgentId: null,
18|caraon-api  |     isActive: true,
18|caraon-api  |     priority: 0,
18|caraon-api  |     config: {
18|caraon-api  |       create: {
18|caraon-api  |         maxTokens: 2000,
18|caraon-api  |         temperature: 0.7,
18|caraon-api  |         model: "googleai/gemini-2.0-flash",
18|caraon-api  |         systemPrompt: "VocÃª Ã© um agente orquestrador que delega tarefas para agentes especializados.",
18|caraon-api  |         fallbackMessage: "Desculpe, nÃ£o consegui processar sua solicitaÃ§Ã£o no momento."
18|caraon-api  |       }
18|caraon-api  |     },
18|caraon-api  | +   type: AgentType
18|caraon-api  |   },
18|caraon-api  |   include: {
18|caraon-api  |     config: true,
18|caraon-api  |     childAgents: true
18|caraon-api  |   }
18|caraon-api  | }
18|caraon-api  | Argument `type` is missing.
18|caraon-api  |     at Dn (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:29:1363)
18|caraon-api  |     at ri.handleRequestError (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:121:7102)
18|caraon-api  |     at ri.handleAndLogRequestError (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:121:6784)
18|caraon-api  |     at ri.request (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:121:6491)
18|caraon-api  |     at async l (/root/CaraON-backend/node_modules/@prisma/client/runtime/library.js:130:9812)
18|caraon-api  |     at async Module.createParentAgent (file:///root/CaraON-backend/src/services/agent.hierarchy.service.js:25:23)
18|caraon-api  |     at async createInstance (file:///root/CaraON-backend/src/controllers/instances.controller.js:20:5) {
18|caraon-api  |   clientVersion: '6.12.0'
18|caraon-api  | }


























































